@model CarRentalMVC.Models.User
@using CarRentalMVC.Models
@{
    ViewData["Title"] = "My Account";
}

<div class="container py-5">
    <div class="row justify-content-center">
        <div class="col-12 col-md-8 col-lg-6">
            <div class="card shadow-lg border-0 p-4" style="border-radius: 1.5rem;">
                <div class="card-body text-center">
                    <div class="mb-4">
                                <img src="~/images/profiles/@(string.IsNullOrEmpty(Model.ProfileImageUrl) ? "default.png" : System.IO.Path.GetFileName(Model.ProfileImageUrl))"
                                    asp-append-version="true"
                                    class="rounded-circle shadow border border-2 border-light mx-auto d-block img-fluid"
                             style="width: 220px; height: 220px; object-fit: cover; background: #fff; cursor: pointer;"
                             alt="Profile Picture"
                             data-bs-toggle="modal" data-bs-target="#profileImageModal" />
                    </div>
                    <!-- Modal for full-size profile image preview -->
                    <div class="modal fade" id="profileImageModal" tabindex="-1" aria-labelledby="profileImageModalLabel" aria-hidden="true">
                      <div class="modal-dialog modal-dialog-centered">
                        <div class="modal-content bg-transparent border-0">
                          <div class="modal-body p-0 text-center">
                            <img src="~/images/profiles/@(string.IsNullOrEmpty(Model.ProfileImageUrl) ? "default.png" : System.IO.Path.GetFileName(Model.ProfileImageUrl))" asp-append-version="true" class="img-fluid rounded shadow" style="max-width: 100%; max-height: 80vh; object-fit: contain; background: #fff;" alt="Full Profile Picture" />
                          </div>
                        </div>
                      </div>
                    </div>
                    <h2 class="fw-bold mb-2 mt-3">@Model.Name</h2>
                    <div class="mb-3">
                        <span class="badge bg-light text-primary fs-6">@Model.Role</span>
                    </div>
                    <div class="mb-3">
                        <i class="bi bi-envelope-at me-2 text-primary"></i>
                        <span class="fs-5">@Model.Email</span>
                    </div>
                    <div class="mb-4">
                        <i class="bi bi-telephone me-2 text-primary"></i>
                        <span class="fs-5">@Model.PhoneNumber</span>
                    </div>
                    <div class="d-flex flex-column flex-md-row justify-content-center gap-3 mt-4">
                        <a asp-action="EditProfile" class="btn btn-outline-yellow btn-lg px-4"><i class="bi bi-pencil-square me-2"></i> Edit Profile</a>
                        <form asp-controller="Account" asp-action="Logout" method="post" class="d-inline">
                            @Html.AntiForgeryToken()
                            <button type="submit" class="btn btn-outline-danger btn-lg px-4"><i class="bi bi-box-arrow-right me-2"></i> Logout</button>
                        </form>
                    </div>
                    <div class="text-center mt-4">
                        <a asp-action="RequestDeleteAccount" class="btn btn-danger btn-lg px-4"><i class="bi bi-trash me-2"></i> Delete Account</a>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<style>
.btn-outline-yellow {
    color: #ffc107;
    border-color: #ffc107;
    background-color: transparent;
}
.btn-outline-yellow:hover, .btn-outline-yellow:focus {
    color: #212529;
    background-color: #ffc107;
    border-color: #ffc107;
}
.card {
    border-radius: 1.5rem;
}
</style>